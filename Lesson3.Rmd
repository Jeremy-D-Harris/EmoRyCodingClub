---
params:
  lesson: "Lesson 3"
  title: "Statistical transformations and using lists"      
  bookchapter_name: "Section 3.5.1"    
  bookchapter_section: "https://r4ds.had.co.nz/data-visualisation.html#statistical-transformations"
  functions: "`p_load`"
  packages: "`pacman`"      
  # end inputs --------------------------------------------------------------- 
header-includes: \usepackage{float}
always_allow_html: yes
output:
  html_document:
    code_folding: show
---
  
```{r, setup, echo = FALSE, cache = FALSE, include = FALSE}
options(width=100)
knitr::opts_chunk$set(
  eval = FALSE, # run all code
  echo = TRUE, # show code chunks in output 
  tidy = TRUE, # make output as tidy
  message = FALSE,  # mask all messages
  warning = FALSE, # mask all warnings 
  comment = "",
  tidy.opts=list(width.cutoff=100), # set width of code chunks in output
  size="small" # set code chunk size
  )
```
\

<!-- install packages -->
```{r, load packages, eval=T, include=T, cache=F, message=F, warning=F, results='hide',echo=F}
packages <- c("ggplot2","ggthemes","dplyr","tidyverse","zoo","RColorBrewer","viridis","plyr")   
if (require(packages)) {
    install.packages(packages,dependencies = T)
    require(packages)
    # load tvthemes
    devtools::install_github("Ryo-N7/tvthemes")
}
lapply(packages,library,character.only=T)  
```

<!-- ____________________________________________________________________________ -->
<!-- ____________________________________________________________________________ -->
<!-- ____________________________________________________________________________ -->
<!-- start body -->

# `r paste0(params$lesson,": ",params$title)`    
\  

Functions for `r params$lesson`  
`r params$functions`    
\    

Packages for `r params$lesson`          
`r params$packages`        
\    

# Agenda

[Data visualisation in `R` for Data Science, `r params$bookchapter_name`](`r params$bookchapter_section`).      
\  

<!--  end yaml template------------------------------------------------------- -->

* Explore the super useful `list` structure    
* Plot bar charts and density distributions  

# Do First    

Recreate the below plot using the smaller NYC Airbnb dataset.  
```{r, echo=F, eval=T, out.width="100%"}
require(ggthemes)
require(ggplot2)
require(readr)

# smaller csv file (16 cols)
url <- "http://data.insideairbnb.com/united-states/ny/new-york-city/2019-06-02/visualisations/listings.csv"
nyc <-  read_csv(url)
nyc <- nyc[nyc$id < 1000000,] # get smaller subet of data

ggplot(data = nyc, mapping = aes(x = minimum_nights, y = price)) +
  geom_point(aes(color=neighbourhood_group),show.legend = F) +
  facet_wrap(~ neighbourhood_group, nrow=length(nyc$neighbourhood_group)) +
  theme_classic()

```
\  

# Load packages with `pacman`  
```{r}
install.packages("pacman")
require(pacman)
```  

Type in the packages you want to install into the p_load function.  
_Note: the below two arguments are the same_
```{r}
p_load(dplyr,ggplot2) # your packages  
pacman::p_load(dplyr,ggplot2) # this is the same as above, but allows you to use a specific function from a package without loading the entire package: 'package::function(argument1,argument2,argument3)'  
```
\  

# Applying the Airbnb data  
Use the new examples on the Airbnb dataset.      

<!-- end body -->
<!-- ____________________________________________________________________________ -->
<!-- ____________________________________________________________________________ -->
<!-- ____________________________________________________________________________ -->
